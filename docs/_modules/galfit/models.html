
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>galfit.models â€” wilfried library 1.0 documentation</title>
<link href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css" rel="stylesheet"/>
<link href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../../_static/vendor/open-sans_all/1.44.1/index.css" rel="stylesheet"/>
<link href="../../_static/vendor/lato_latin-ext/1.44.1/index.css" rel="stylesheet"/>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css">
<link href="../../_static/sphinx-book-theme.e7340bb3dbd8dde6db86f25597f54a1b.css" rel="stylesheet" type="text/css">
<link as="script" href="../../_static/js/index.d3f166471bb80abb5163.js" rel="preload"/>
<script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script>
<script src="../../_static/underscore.js"></script>
<script src="../../_static/doctools.js"></script>
<script src="../../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
<link href="../../genindex.html" rel="index" title="Index">
<link href="../../search.html" rel="search" title="Search">
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
</link></link></link></link></head>
<body data-offset="80" data-spy="scroll" data-target="#bd-toc-nav">
<div class="container-xl">
<div class="row">
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
<div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
<h1 class="site-logo" id="site-title">wilfried library 1.0 documentation</h1>
</a>
</div><form action="../../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="icon fas fa-search"></i>
<input aria-label="Search the docs ..." autocomplete="off" class="form-control" id="search-input" name="q" placeholder="Search the docs ..." type="search"/>
</form>
<nav aria-label="Main navigation" class="bd-links" id="bd-docs-nav">
<ul class="nav sidenav_l1">
<li class="toctree-l1">
<a class="reference internal" href="../../index.html">
   Table of content
  </a>
</li>
</ul>
<ul class="nav sidenav_l1">
<li class="toctree-l1">
<a class="reference internal" href="../../dependencies.html">
   Required dependencies
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="../../makeLifeSimpler.html">
   makeLifeSimpler
  </a>
</li>
<li class="toctree-l1 collapsible-parent">
<a class="reference internal" href="../../galaxy/index.html">
   Galaxy module
  </a>
<ul class="collapse-ul">
<li class="toctree-l2">
<a class="reference internal" href="../../galaxy/angularMomentum.html">
     Galaxies angular momentum
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../galaxy/cosmology.html">
     Cosmology computations
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../galaxy/kinematics.html">
     Galaxy kinematics
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../galaxy/misc.html">
     Miscellaneous
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../galaxy/massModels.html">
     Galaxy mass models
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../galaxy/models.html">
     Galaxy models
    </a>
</li>
<li class="toctree-l2 collapsible-parent">
<a class="reference internal" href="../../galaxy/morphology/index.html">
     Galaxies morphology
    </a>
<ul class="collapse-ul">
<li class="toctree-l3">
<a class="reference internal" href="../../galaxy/morphology/SersicFlux.html">
       Sersic fluxes
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../galaxy/morphology/Morpho.html">
       Morphological parameters
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../galaxy/morphology/Thickness.html">
       Galaxies thickness
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../galaxy/morphology/MUSE.html">
       MUSE related functions
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../galaxy/morphology/Other.html">
       Other Sersic related functions
      </a>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
<li class="toctree-l2 collapsible-parent">
<a class="reference internal" href="../../galaxy/photometry/index.html">
     Galaxies photometry
    </a>
<ul class="collapse-ul">
<li class="toctree-l3">
<a class="reference internal" href="../../galaxy/photometry/Fluxes.html">
       Fluxes, colour excess and attenuation
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../galaxy/photometry/Masses_SFR.html">
       Masses and SFR estimates
      </a>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
<li class="toctree-l1 collapsible-parent">
<a class="reference internal" href="../../galfit/index.html">
   Galfit module
  </a>
<ul class="collapse-ul">
<li class="toctree-l2">
<a class="reference internal" href="../../galfit/galfit.html">
     Galfit auto-routines
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../galfit/models.html">
     Galfit models
    </a>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
</ul>
</nav> 
<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>
</div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
<div class="topbar container-xl fixed-top">
<div class="topbar-contents row">
<div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
<div class="col pl-md-4 topbar-main">
<button aria-controls="site-navigation" aria-expanded="true" aria-label="Toggle navigation" class="navbar-toggler ml-0" data-placement="left" data-target=".site-navigation" data-toggle="tooltip" id="navbar-toggler" title="Toggle navigation" type="button">
<i class="fas fa-bars"></i>
<i class="fas fa-arrow-left"></i>
<i class="fas fa-arrow-up"></i>
</button>

<div class="dropdown-buttons-trigger">
<button aria-label="Connect with source repository" class="btn btn-secondary topbarbtn" id="dropdown-buttons-trigger"><i class="fab fa-github"></i></button>
<div class="dropdown-buttons sourcebuttons">
<a class="repository-button" href="https://github.com/WilfriedMercier/wilfried"><button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" title="Source repository" type="button"><i class="fab fa-github"></i>repository</button></a>
</div>
</div>

<a class="full-screen-button"><button aria-label="Fullscreen mode" class="btn btn-secondary topbarbtn" data-placement="bottom" data-toggle="tooltip" onclick="toggleFullScreen()" title="Fullscreen mode" type="button"><i class="fas fa-expand"></i></button></a>

</div>

<div class="d-none d-md-block col-md-2 bd-toc show">
</div>
</div>
</div>
<div class="row" id="main-content">
<div class="col-12 col-md-9 pl-md-3 pr-md-0">
<div>
<h1>Source code for galfit.models</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">"""</span>
<span class="sd">.. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>

<span class="sd">Galfit model functions.</span>
<span class="sd">"""</span>

<span class="kn">from</span> <span class="nn">wilfried.utilities.strings</span> <span class="kn">import</span> <span class="n">putStringsTogether</span><span class="p">,</span> <span class="n">toStr</span><span class="p">,</span> <span class="n">computeStringsLen</span><span class="p">,</span> <span class="n">maxStringsLen</span>
<span class="kn">from</span> <span class="nn">numpy</span>                      <span class="kn">import</span> <span class="n">ravel</span>

<span class="c1">##########################################</span>
<span class="c1">#          Global variables              #</span>
<span class="c1">##########################################</span>

<span class="n">formats</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'posFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'PAFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'bOveraFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.2f</span><span class="s2">"</span><span class="p">,</span> 
           <span class="s1">'nFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.2f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'magFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">,</span> 
           <span class="s1">'muFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'radiusFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.2f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'powerlawFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.2f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'backgroundFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.2f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'GradientFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.3f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'bendingFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.2f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'ampFourierFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.2f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'phaseFourierFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.1f</span><span class="s2">"</span><span class="p">,</span>
           <span class="s1">'boxy_diskyFormat'</span><span class="p">:</span><span class="s2">"</span><span class="si">%.2f</span><span class="s2">"</span>
          <span class="p">}</span>

<span class="n">defaultComments</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'object'</span><span class="p">:</span>                    <span class="s1">'Object type'</span><span class="p">,</span> 
                   <span class="s1">'pos'</span><span class="p">:</span>                       <span class="s1">'position x, y                         [pixel]'</span><span class="p">,</span>
                   <span class="s1">'mag'</span><span class="p">:</span>                       <span class="s1">'total magnitude'</span><span class="p">,</span>
                   <span class="s1">'re'</span><span class="p">:</span>                        <span class="s1">'effective radius R_e                  [pixel]'</span><span class="p">,</span>
                   <span class="s1">'n'</span><span class="p">:</span>                         <span class="s1">'Sersic exponent (deVauc=4, expdisk=1)'</span><span class="p">,</span>
                   <span class="s1">'bOvera'</span><span class="p">:</span>                    <span class="s1">'axis ratio (b/a)'</span><span class="p">,</span>
                   <span class="s1">'PA'</span><span class="p">:</span>                        <span class="s1">'position angle (PA)                   [Degrees: Up=0, Left=90]'</span><span class="p">,</span>
                   <span class="s1">'skipComponentInResidual'</span><span class="p">:</span>   <span class="s1">'Skip this model in output image?  (yes=1, no=0)'</span><span class="p">,</span>
                   <span class="s1">'mu'</span><span class="p">:</span>                        <span class="s1">'mu(Rb)                                [surface brightness mag. at Rb]'</span><span class="p">,</span>
                   <span class="s1">'rb'</span><span class="p">:</span>                        <span class="s1">'break radius Rb                       [pixel]'</span><span class="p">,</span>
                   <span class="s1">'alpha'</span><span class="p">:</span>                     <span class="s1">'alpha  (sharpness of transition)'</span><span class="p">,</span>
                   <span class="s1">'beta'</span><span class="p">:</span>                      <span class="s1">'beta   (outer powerlaw slope)'</span><span class="p">,</span>
                   <span class="s1">'gamma'</span><span class="p">:</span>                     <span class="s1">'gamma  (inner powerlaw slope)'</span><span class="p">,</span>
                   <span class="s1">'rs'</span><span class="p">:</span>                        <span class="s1">'scale-length R_s (R_e = 1.678R_s)     [pixel]'</span><span class="p">,</span>
                   <span class="s1">'diskScaleLength'</span><span class="p">:</span>           <span class="s1">'disk scale-length                     [pixel]'</span><span class="p">,</span>
                   <span class="s1">'diskScaleHeight'</span><span class="p">:</span>           <span class="s1">'disk scale-height                     [pixel]'</span><span class="p">,</span>
                   <span class="s1">'FWHM'</span><span class="p">:</span>                      <span class="s1">'FWHM                                  [pixel]'</span><span class="p">,</span>
                   <span class="s1">'powerlaw'</span><span class="p">:</span>                  <span class="s1">'powerlaw'</span><span class="p">,</span>
                   <span class="s1">'rt'</span><span class="p">:</span>                        <span class="s1">'Outer truncation radius               [pixel]'</span><span class="p">,</span>
                   <span class="s1">'alphaFerrer'</span><span class="p">:</span>               <span class="s1">'Alpha (outer truncation sharpness)'</span><span class="p">,</span>
                   <span class="s1">'betaFerrer'</span><span class="p">:</span>                <span class="s1">'Beta (central slope)'</span><span class="p">,</span>
                   <span class="s1">'mu0'</span><span class="p">:</span>                       <span class="s1">'mu(0) (Central surface brightness in mag/arcsec^2)'</span><span class="p">,</span>
                   <span class="s1">'rc'</span><span class="p">:</span>                        <span class="s1">'Core radius Rc                        [pixel]'</span><span class="p">,</span>
                   <span class="s1">'background'</span><span class="p">:</span>                <span class="s1">'sky background                        [ADU counts]'</span><span class="p">,</span>
                   <span class="s1">'xGradient'</span><span class="p">:</span>                 <span class="s1">'dsky/dx (sky gradient in x)'</span><span class="p">,</span>
                   <span class="s1">'yGradient'</span><span class="p">:</span>                 <span class="s1">'dsky/dy (sky gradient in y)'</span>
                  <span class="p">}</span>


<span class="c1">################################################################</span>
<span class="c1">#                   Miscellanous functions                     #</span>
<span class="c1">################################################################</span>

<div class="viewcode-block" id="createIsFixedDict"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.createIsFixedDict">[docs]</a><span class="k">def</span> <span class="nf">createIsFixedDict</span><span class="p">(</span><span class="n">fullListOfNames</span><span class="p">,</span> <span class="n">fixedParams</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Make a dictionnary which stores which parameters should be fixed (value of 0) and which should not (value of 1).</span>

<span class="sd">    :param list[str] fixedParams: list of parameters names which must be fixed during galfit fitting routine. </span>
<span class="sd">    </span>
<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            BY DEFAULT, ALL PARAMETERS ARE SET FREE.</span>
<span class="sd">        </span>
<span class="sd">        .. rubric:: **Example**</span>
<span class="sd">        </span>
<span class="sd">        For instance, if one wants to fix :samp:`re` and :samp:`n`, one may provide </span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; fixedParams=["re", "n"]</span>
<span class="sd">        &gt;&gt;&gt; createIsFixedDict(fullListOfNames, fixedParams)</span>
<span class="sd">        </span>
<span class="sd">    :param list[str] fullListOfNames: complete list of parameter names which can either be fixed or let free</span>

<span class="sd">    :returns: dictionnary with key names equal to parameter names of the model and key values equal to 0 or 1</span>
<span class="sd">    :rtype: dict</span>
<span class="sd">    """</span>
    
    <span class="n">isFixed</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">fullListOfNames</span><span class="p">:</span>
        <span class="c1"># If parameter must be fixed, put 0</span>
        <span class="k">if</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">fixedParams</span><span class="p">:</span>
            <span class="n">isFixed</span><span class="p">[</span><span class="n">param</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">isFixed</span><span class="p">[</span><span class="n">param</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">isFixed</span></div>
    

<div class="viewcode-block" id="createCommentsDict"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.createCommentsDict">[docs]</a><span class="k">def</span> <span class="nf">createCommentsDict</span><span class="p">(</span><span class="n">fullListOfNames</span><span class="p">,</span> <span class="n">comments</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Make a dictionnary which stores the comments associated to each line in the galfit configuration file.</span>

<span class="sd">    :param dict comments: dictionnary which contains a comment for each line. If **comments** is None, default comments will be used instead.</span>
<span class="sd">        </span>
<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">        </span>
<span class="sd">    :param list[str] fullListOfNames: complete list of parameter names which can either be fixed or let free</span>
<span class="sd">    </span>
<span class="sd">    :returns: dictionnary with key names equal to parameter names of the model and key values equal to their comment</span>
<span class="sd">    :rtype: dict</span>
<span class="sd">    """</span>
    
    <span class="k">global</span> <span class="n">defaultComments</span>

    <span class="k">if</span> <span class="n">comments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">fullListOfNames</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">param</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">comments</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="c1"># Set comments to None if not provided</span>
                <span class="n">comments</span><span class="p">[</span><span class="n">param</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">comments</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">fullListOfNames</span><span class="p">:</span>
            <span class="n">comments</span><span class="p">[</span><span class="n">param</span><span class="p">]</span>     <span class="o">=</span> <span class="n">defaultComments</span><span class="p">[</span><span class="n">param</span><span class="p">]</span>
            
    <span class="k">return</span> <span class="n">comments</span></div>


<span class="c1">################################################################</span>
<span class="c1">#                   General main function                      #</span>
<span class="c1">################################################################</span>

<div class="viewcode-block" id="genModel"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genModel">[docs]</a><span class="k">def</span> <span class="nf">genModel</span><span class="p">(</span><span class="n">modelName</span><span class="p">,</span> <span class="n">listLineIndex</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">fixedOrNot</span><span class="p">,</span> <span class="n">paramsFormat</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mainComment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">removeLine0</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">""</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Very general function which can output any GALFIT model configuration. </span>
<span class="sd">    </span>
<span class="sd">    .. warning::</span>

<span class="sd">        This function is not supposed to be used directly by the user, but should be called by a function whose goal is to output the galfilt configuration of a specific profile. </span>
<span class="sd">    </span>
<span class="sd">        This should only be seen as a bare skeleton which is used in function calls in order to build specific galfit model configuration for feedme files.</span>

<span class="sd">    :param list[bool] fixedOrNot: whether each parameter given in **params** must be fixed during GALFIT fitting routine or not. This takes the same shape as **params**.</span>
<span class="sd">    :param list[str] listLineIndex: list of GALFIT indices for each line (generally from 1 to 10, including Z at the end)</span>
<span class="sd">    :param str modelName: name of the model used</span>
<span class="sd">    :param list params: parameters value for each line given in the same order as the indices. If, for a certain index, there are more than one parameter (ex: model center), then provide these as a list.</span>
<span class="sd">        </span>
<span class="sd">        .. rubric:: ***Example**</span>
<span class="sd">        </span>
<span class="sd">        Say two indices are given such that </span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; listLineIndex = [1, 2] </span>
<span class="sd">        </span>
<span class="sd">        where the first one is for the Sersic index n=1 and the other for the effective radius re=10, then we would have</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; params = [1, 10]</span>
<span class="sd">        </span>
<span class="sd">        Say three indices are given such that</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; listLineIndex = [1, 2, 3] </span>
<span class="sd">        </span>
<span class="sd">        with the first two as before and the last one as the model center position (let us assume it lies at position (3, 5)), then we would have</span>
<span class="sd">            </span>
<span class="sd">        &gt;&gt;&gt; params = [1, 10 [3, 5]]</span>
<span class="sd">        </span>
<span class="sd">        This generalises for any number of parameters.</span>
<span class="sd">            </span>
<span class="sd">    :param list[str] paramsFormat: format of the parameters used for the output. The shape of this parameter should be identical as that of params.</span>
<span class="sd">    </span>
<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            This uses old Python format. If you do not care about the output format, just provide a simple format for each argument ("%d" for int, "%f" for float, "%e" for scientific notation, etc.). </span>
<span class="sd">            </span>
<span class="sd">            Otherwise, you can use more complex notation to truncate values, align strings to the left or the right and so on.</span>
<span class="sd">        </span>
<span class="sd">    :param list[str] comments: (**Optional**) comments to add at the end of the lines. If you do not want to provide a comment for a specific index, just give None.</span>
<span class="sd">    :param str mainComment: (**Optional**) main comment which appears before the configuration line (generally the full model name)</span>
<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param str prefix: (**Optional**) prefix to add before the line index. For instance the index 1) would become B1) with the prefix "B".</span>
<span class="sd">    :param bool removeLine0: whether to remove line number 0 (model name). This is useful when one wants to make an output for additional terms such as bending modes.</span>
<span class="sd">        </span>
<span class="sd">    :returns: galfit model configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>

    <span class="n">listLineIndex</span> <span class="o">=</span> <span class="n">toStr</span><span class="p">(</span><span class="n">listLineIndex</span><span class="p">)</span>
    <span class="n">length</span>        <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listLineIndex</span><span class="p">)</span>
    
    <span class="c1">#this is used to know the size the comments list should have</span>
    <span class="k">if</span> <span class="n">removeLine0</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">length</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">length</span><span class="o">+</span><span class="mi">1</span>
    
    <span class="c1">#first line with the model name</span>
    <span class="k">if</span> <span class="n">mainComment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">firstLine</span>     <span class="o">=</span> <span class="s2">"# "</span> <span class="o">+</span> <span class="n">mainComment</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n\n</span><span class="s2">"</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">firstLine</span>     <span class="o">=</span> <span class="s2">""</span>

    <span class="c1">#define comment as an empty string if not provided</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">noComments</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">comments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">comments</span>  <span class="o">=</span> <span class="p">[</span><span class="s2">""</span><span class="p">]</span><span class="o">*</span><span class="n">size</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">comments</span><span class="p">)</span> <span class="o">!=</span> <span class="n">size</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"InputError: optional argument 'comment' does not have the same length as 'listLineIndex'. Either provide no comment at all, or one for every line. Cheers !"</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        
    <span class="c1"># This is the maximum string length in listLineIndex (it is used to align the first column only)</span>
    <span class="n">lenIndex</span>      <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">computeStringsLen</span><span class="p">(</span><span class="n">listLineIndex</span><span class="p">))</span>
    <span class="n">formatIndex</span>   <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s2">"%"</span> <span class="o">+</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span> <span class="o">%</span><span class="n">lenIndex</span> <span class="o">+</span> <span class="s2">"s"</span> <span class="o">+</span> <span class="s2">") "</span>
    
    <span class="c1"># Create a list with all lines as an element. First line is model name which is not provided in the index list</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">removeLine0</span><span class="p">:</span>
        <span class="n">allLines</span>      <span class="o">=</span> <span class="p">[</span><span class="n">formatIndex</span><span class="o">%</span><span class="s2">"0"</span> <span class="o">+</span> <span class="n">modelName</span><span class="p">]</span>
        <span class="n">startPoint</span>    <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">allLines</span>      <span class="o">=</span> <span class="p">[]</span>
        <span class="n">startPoint</span>    <span class="o">=</span> <span class="mi">0</span>
    
    <span class="c1"># Generate each (other) line separately</span>
    <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">pm</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">pf</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">startPoint</span><span class="p">,</span> <span class="n">length</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">,</span> <span class="n">listLineIndex</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">fixedOrNot</span><span class="p">,</span> <span class="n">paramsFormat</span><span class="p">):</span>
        
        <span class="c1"># First add the index value</span>
        <span class="n">allLines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">formatIndex</span> <span class="o">%</span><span class="n">idx</span><span class="p">)</span>
        
        <span class="c1">#T hen check whether there are more than one parameter on the line (for instance a model center)</span>
        <span class="c1"># If so, loop over them, otherwise just add the single parameter and its fixedOrNot corresponding flag</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">valpm</span><span class="p">,</span> <span class="n">valpf</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">pf</span><span class="p">):</span>
                <span class="n">allLines</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">+=</span> <span class="n">valpf</span> <span class="o">%</span><span class="n">valpm</span> <span class="o">+</span> <span class="s2">" "</span>
            <span class="k">for</span> <span class="n">valfx</span> <span class="ow">in</span> <span class="n">fx</span><span class="p">:</span>
                <span class="n">allLines</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">valfx</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" "</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">allLines</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>     <span class="o">+=</span> <span class="n">pf</span> <span class="o">%</span><span class="n">pm</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fx</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" "</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="n">noComments</span><span class="p">:</span>
        <span class="c1"># Retrieve the length of the longest line in order to align the comments</span>
        <span class="n">maxLineLen</span>             <span class="o">=</span> <span class="n">maxStringsLen</span><span class="p">(</span><span class="n">allLines</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">com</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">),</span> <span class="n">comments</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">com</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">allLines</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>  <span class="o">=</span> <span class="p">(</span><span class="s2">"%-"</span> <span class="o">+</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span> <span class="o">%</span><span class="n">maxLineLen</span> <span class="o">+</span> <span class="s2">"s"</span><span class="p">)</span> <span class="o">%</span><span class="n">allLines</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"  # "</span> <span class="o">+</span> <span class="n">com</span>
            
    <span class="k">return</span> <span class="n">firstLine</span> <span class="o">+</span> <span class="n">putStringsTogether</span><span class="p">(</span><span class="n">allLines</span><span class="p">)</span></div>


<span class="c1">##############################################################</span>
<span class="c1">#               Profiles avaiblable in galfit                #</span>
<span class="c1">##############################################################</span>

<div class="viewcode-block" id="gendeVaucouleur"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.gendeVaucouleur">[docs]</a><span class="k">def</span> <span class="nf">gendeVaucouleur</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mag</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span> <span class="n">re</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">bOvera</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct a de Vaucouleur function configuration.</span>

<span class="sd">    :param float mag: (**Optional**) total integrated magnitude of the profile</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    :param float re: (**Optional**) half-light (effective) radius of the profile (in pixel)</span>
<span class="sd">        </span>
<span class="sd">    :param float bOvera: (**Optional**) axis ratio b/a of the minor over major axes. Must be between 0 and 1.</span>
<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>
<span class="sd">            </span>
<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param PA: (**Optional**) position angle of the morphological major axis on the sky (in degrees). Up is 0Â° and Left is 90Â°.</span>
<span class="sd">    :type PA: int or float</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    :returns: de Vaucouleur GALFIT configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"re"</span><span class="p">,</span> <span class="s2">"n"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"re"</span><span class="p">,</span> <span class="s2">"n"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"devauc"</span><span class="p">,</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mag</span><span class="p">,</span> <span class="n">re</span><span class="p">,</span> <span class="n">bOvera</span><span class="p">,</span> <span class="n">PA</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"re"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'magFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'bOveraFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'PAFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"re"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'de Vaucouleur function'</span><span class="p">)</span></div>


<div class="viewcode-block" id="genEdgeOnDisk"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genEdgeOnDisk">[docs]</a><span class="k">def</span> <span class="nf">genEdgeOnDisk</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">diskScaleLength</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">diskScaleHeight</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> 
                  <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    . codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct an Edge-on disk function configuration.</span>

<span class="sd">    :param float diskScaleHeight: (**Optional**) disk scale-height perpendicular to the disk (in pixel)</span>
<span class="sd">    :param float mu: (**Optional**) central surface brightness (:math:`\rm{mag/arcsec^2}`) of the profile</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    :param float diskScaleLength: major axis disk scale-length (in pixel)</span>

<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param PA: (**Optional**) position angle of the morphological major axis on the sky (in degrees). Up is 0Â° and Left is 90Â°.</span>
<span class="sd">    :type PA: int or float</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    :returns: Edge-on disk GALFIT configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mu"</span><span class="p">,</span> <span class="s2">"diskScaleHeight"</span><span class="p">,</span> <span class="s2">"diskScaleLength"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mu"</span><span class="p">,</span> <span class="s2">"diskScaleHeight"</span><span class="p">,</span> <span class="s2">"diskScaleLength"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"edgedisk"</span><span class="p">,</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mu</span><span class="p">,</span> <span class="n">diskScaleHeight</span><span class="p">,</span> <span class="n">diskScaleLength</span><span class="p">,</span> <span class="n">PA</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mu"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"diskScaleHeight"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"diskScaleLength"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'muFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'PAFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mu"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"diskScaleHeight"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"diskScaleLength"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'Edge-on disk function'</span><span class="p">)</span></div>


<div class="viewcode-block" id="genExpDisk"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genExpDisk">[docs]</a><span class="k">def</span> <span class="nf">genExpDisk</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mag</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span> <span class="n">rs</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span> <span class="n">bOvera</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct an exponential disk function configuration.</span>
<span class="sd">    </span>
<span class="sd">    :param float mag: (**Optional**) total integrated magnitude of the profile</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    :param float rs: (**Optional**) disk scale-length (in pixel) such that :math:`R_{\rm{s}} = R_{\rm{e}}/1.678`, with :math:`R_{\rm{e}}` the effective radius of an equivalent n=1 Sersic profile.</span>
<span class="sd">    :param float bOvera: (**Optional**) axis ratio b/a of the minor over major axes (must be between 0 and 1)</span>

<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param PA: (**Optional**) position angle of the morphological major axis on the sky (in degrees). Up is 0Â° and Left is 90Â°.</span>
<span class="sd">    :type PA: int or float</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    :returns: Exponential disk GALFIT configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"rs"</span><span class="p">,</span> <span class="s2">"n"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"rs"</span><span class="p">,</span> <span class="s2">"n"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"expdisk"</span><span class="p">,</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mag</span><span class="p">,</span> <span class="n">rs</span><span class="p">,</span> <span class="n">bOvera</span><span class="p">,</span> <span class="n">PA</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"rs"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'magFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'bOveraFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'PAFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"rs"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'Exponential function'</span><span class="p">)</span></div>


<div class="viewcode-block" id="genFerrer"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genFerrer">[docs]</a><span class="k">def</span> <span class="nf">genFerrer</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">rt</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">alphaFerrer</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">betaFerrer</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">bOvera</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> 
             <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct a Ferrer function configuration.</span>
<span class="sd">    </span>
<span class="sd">    :param float mu: (**Optional**) surface brightness (:math:`\rm{mag/arcsec^2}`) at radius rb</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    :param float rt: (**Optional**) outer truncation radius (in pixel)</span>
<span class="sd">        </span>
<span class="sd">    :param float alphaFerrer: (**Optional**) sharpness of the truncation</span>
<span class="sd">    :param float betaFerrer: (**Optional**) central slope  </span>
<span class="sd">    :param float bOvera: (**Optional**) axis ratio b/a of the minor over major axes (must be between 0 and 1)</span>

<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param PA: (**Optional**) position angle of the morphological major axis on the sky (in degrees). Up is 0Â° and Left is 90Â°.</span>
<span class="sd">    :type PA: int or float</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    :returns: Ferrer GALFIT configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mu"</span><span class="p">,</span> <span class="s2">"rt"</span><span class="p">,</span> <span class="s2">"alphaFerrer"</span><span class="p">,</span> <span class="s2">"betaFerrer"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mu"</span><span class="p">,</span> <span class="s2">"rt"</span><span class="p">,</span> <span class="s2">"alphaFerrer"</span><span class="p">,</span> <span class="s2">"betaFerrer"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"nuker"</span><span class="p">,</span> 
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mu</span><span class="p">,</span> <span class="n">rt</span><span class="p">,</span> <span class="n">alphaFerrer</span><span class="p">,</span> <span class="n">betaFerrer</span><span class="p">,</span> <span class="n">bOvera</span><span class="p">,</span> <span class="n">PA</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mu"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"rt"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"alphaFerrer"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"betaFerrer"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormatY'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'muFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'powerlawFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'powerlawFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'bOveraFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'PAFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mu"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"rt"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"alphaFerrer"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"betaFerrer"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'Nuker function'</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="genGaussian"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genGaussian">[docs]</a><span class="k">def</span> <span class="nf">genGaussian</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mag</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span> <span class="n">FWHM</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">bOvera</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct a Gaussian function configuration.</span>

<span class="sd">    :param float FWHM: (**Optional**) full width at half maximum of the PSF (in pixel)</span>
<span class="sd">    :param float mag: (**Optional**) total integrated magnitude of the profile</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    :param float bOvera: (**Optional**) axis ratio b/a of the minor over major axes (must be between 0 and 1)</span>

<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param PA: (**Optional**) position angle of the morphological major axis on the sky (in degrees). Up is 0Â° and Left is 90Â°.</span>
<span class="sd">    :type PA: int or float</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    :returns: Gaussian GALFIT configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"FWHM"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"FWHM"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"gaussian"</span><span class="p">,</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mag</span><span class="p">,</span> <span class="n">FWHM</span><span class="p">,</span> <span class="n">bOvera</span><span class="p">,</span> <span class="n">PA</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"FWHM"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'magFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'bOveraFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'PAFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"FWHM"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'Gaussian function'</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="genKing"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genKing">[docs]</a><span class="k">def</span> <span class="nf">genKing</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mu0</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">rc</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">rt</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span> <span class="n">powerlaw</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">bOvera</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> 
            <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct an empirical King profile configuration.</span>

<span class="sd">    :param float mu0: (**Optional**) central surface brightness (:math:`\rm{mag/arcsec^2}`)</span>
<span class="sd">    :param float powerlaw: (**Optional**) powerlaw (powerlaw=2.0 for a standard King profile)</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    :param float rc: (**Optional**) core radius (in pixel)</span>
<span class="sd">    :param float rt: (**Optional**) truncation radius (in pixel)</span>
<span class="sd">    :param float bOvera: (**Optional**) axis ratio b/a of the minor over major axes (must be between 0 and 1)</span>

<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param PA: (**Optional**) position angle of the morphological major axis on the sky (in degrees). Up is 0Â° and Left is 90Â°.</span>
<span class="sd">    :type PA: int or float</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    :returns: King profile GALFIT configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mu0"</span><span class="p">,</span> <span class="s2">"rc"</span><span class="p">,</span> <span class="s2">"rt"</span><span class="p">,</span> <span class="s2">"powerlaw"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mu0"</span><span class="p">,</span> <span class="s2">"rc"</span><span class="p">,</span> <span class="s2">"rt"</span><span class="p">,</span> <span class="s2">"powerlaw"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"king"</span><span class="p">,</span> 
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mu0</span><span class="p">,</span> <span class="n">rc</span><span class="p">,</span> <span class="n">rt</span><span class="p">,</span> <span class="n">powerlaw</span><span class="p">,</span> <span class="n">bOvera</span><span class="p">,</span> <span class="n">PA</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mu0"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"rc"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"rt"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"powerlaw"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'muFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'powerlawFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'bOveraFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'PAFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mu0"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"rc"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"rt"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"powerlaw"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'The Empirical King Profile'</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="genMoffat"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genMoffat">[docs]</a><span class="k">def</span> <span class="nf">genMoffat</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mag</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span> <span class="n">FWHM</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">powerlaw</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">bOvera</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct a de Vaucouleur function configuration.</span>
<span class="sd">    </span>
<span class="sd">    :param float FWHM: (**Optional**) full width at half maximum of the PSF (in pixel)</span>
<span class="sd">    :param float mag: (**Optional**) total integrated magnitude of the profile</span>
<span class="sd">    :param float powerlaw: (**Optional**) powerlaw</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    :param float bOvera: (**Optional**) axis ratio b/a of the minor over major axes (must be between 0 and 1)</span>

<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param PA: (**Optional**) position angle of the morphological major axis on the sky (in degrees). Up is 0Â° and Left is 90Â°.</span>
<span class="sd">    :type PA: int or float</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    Returns a complete de Vaucouleur function galfit configuration as formatted text.</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"FWHM"</span><span class="p">,</span> <span class="s2">"powerlaw"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"FWHM"</span><span class="p">,</span> <span class="s2">"powerlaw"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"moffat"</span><span class="p">,</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mag</span><span class="p">,</span> <span class="n">FWHM</span><span class="p">,</span> <span class="n">powerlaw</span><span class="p">,</span> <span class="n">bOvera</span><span class="p">,</span> <span class="n">PA</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"FWHM"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"powerlaw"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'magFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'powerlawFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'bOveraFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'PAFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"FWHM"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"powerlaw"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'Moffat function'</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="genNuker"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genNuker">[docs]</a><span class="k">def</span> <span class="nf">genNuker</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">rb</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">bOvera</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> 
             <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct a Nuker function configuration.</span>
<span class="sd">    </span>
<span class="sd">    :param float mu: (**Optional**) surface brightness (:math:`\rm{mag/arcsec^2}`) at radius rb</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    :param float rb: (**Optional**) break radius (in pixel) where the slope is the average between :math:`\beta` and :math:`\gamma`, and where the maximum curvature (in log space) is reached. It roughly corresponds to the radius of transition between the inner and outer powerlaws.</span>
<span class="sd">        </span>
<span class="sd">    :param float alpha: (**Optional**) sharpness of transition between the inner part and the outer part</span>
<span class="sd">    :param float beta: (**Optional**) outer powerlaw slope</span>
<span class="sd">    :param float bOvera: (**Optional**) axis ratio b/a of the minor over major axes (must be between 0 and 1)</span>

<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param float gamma: (**Optional**) inner powerlaw slope</span>
<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param PA: (**Optional**) position angle of the morphological major axis on the sky (in degrees). Up is 0Â° and Left is 90Â°.</span>
<span class="sd">    :type PA: int or float</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">   :returns: Nuker GALFIT configuration as formatted text</span>
<span class="sd">   :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mu"</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">,</span> <span class="s2">"alpha"</span><span class="p">,</span> <span class="s2">"beta"</span><span class="p">,</span> <span class="s2">"gamma"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mu"</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">,</span> <span class="s2">"alpha"</span><span class="p">,</span> <span class="s2">"beta"</span><span class="p">,</span> <span class="s2">"gamma"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"nuker"</span><span class="p">,</span> 
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mu</span><span class="p">,</span> <span class="n">rb</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">bOvera</span><span class="p">,</span> <span class="n">PA</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mu"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"rb"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"alpha"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"beta"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"gamma"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'muFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'powerlawFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'powerlawFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'powerlawFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'bOveraFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'PAFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mu"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"rb"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"alpha"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"beta"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"gamma"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'Nuker function'</span><span class="p">)</span></div>


<div class="viewcode-block" id="genPSF"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genPSF">[docs]</a><span class="k">def</span> <span class="nf">genPSF</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mag</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct PSF function configuration. </span>
<span class="sd">    </span>
<span class="sd">    .. note::</span>
<span class="sd">        </span>
<span class="sd">        This PSF is technically not a function, but uses the psf image provided in the header to fit a given point source.</span>
<span class="sd">    </span>
<span class="sd">    :param float mag: (**Optional**) total integrated magnitude of the profile</span>
<span class="sd">    :param float powerlaw: (**Optional**) powerlaw</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    </span>
<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    Returns a complete PSF function galfit configuration as formatted text.</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"psf"</span><span class="p">,</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mag</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'magFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'PSF fit'</span><span class="p">)</span></div>


<div class="viewcode-block" id="genSersic"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genSersic">[docs]</a><span class="k">def</span> <span class="nf">genSersic</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">mag</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span> <span class="n">re</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">bOvera</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">PA</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct a Sersic function configuration.</span>
<span class="sd">    </span>
<span class="sd">    :param float mag: (**Optional**) total integrated magnitude of the profile</span>
<span class="sd">    :param float powerlaw: (**Optional**) powerlaw</span>
<span class="sd">    :param x: (**Optional**) X position of the de Vaucouleur profile center (in pixel)</span>
<span class="sd">    :type x: int or float</span>
<span class="sd">    :param y: (**Optional**) Y position of the de Vaucouleur profile center  (in pixel)</span>
<span class="sd">    :type y: int or float</span>
<span class="sd">    :param float re: half-light (effective) radius of the profile (in pixel)</span>
<span class="sd">    :param float bOvera: (**Optional**) axis ratio b/a of the minor over major axes (must be between 0 and 1)</span>

<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param n: Sersic index</span>
<span class="sd">    :type n: int or float</span>
<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param PA: (**Optional**) position angle of the morphological major axis on the sky (in degrees). Up is 0Â° and Left is 90Â°.</span>
<span class="sd">    :type PA: int or float</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    :returns: Sersic GALFT configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="c1"># isFixed is a dictionnary with correct value for fixing parameters in galfit fit</span>
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"re"</span><span class="p">,</span> <span class="s2">"n"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"pos"</span><span class="p">,</span> <span class="s2">"mag"</span><span class="p">,</span> <span class="s2">"re"</span><span class="p">,</span> <span class="s2">"n"</span><span class="p">,</span> <span class="s2">"bOvera"</span><span class="p">,</span> <span class="s2">"PA"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"sersic"</span><span class="p">,</span> 
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">mag</span><span class="p">,</span> <span class="n">re</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">bOvera</span><span class="p">,</span> <span class="n">PA</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">isFixed</span><span class="p">[</span><span class="s2">"x"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"re"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"n"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'posFormat'</span><span class="p">]],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'magFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'radiusFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'nFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'bOveraFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'PAFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"pos"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"mag"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"re"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"n"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"bOvera"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"PA"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'Sersic function'</span><span class="p">)</span></div>


<div class="viewcode-block" id="genSky"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.genSky">[docs]</a><span class="k">def</span> <span class="nf">genSky</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">xGradient</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">yGradient</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct a sky function configuration.</span>

<span class="sd">    :param float background: (**Optional**) sky background  (in ADU counts)</span>
<span class="sd">    :param float xGradient: (**Optional**) sky gradient along x, :math:`d{\rm{sky}}/dx` (in ADU/pixel)</span>
<span class="sd">    :param float yGradient: (**Optional**) sky gradient along y, :math:`d{\rm{sky}}/dy` (in ADU/pixel)</span>
<span class="sd">        </span>
<span class="sd">    :param dict comments: (**Optional**) dictionnary which contains a comment for each line. By default, it is set to None, and default comments will be used instead.</span>

<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            In general, the dictionnary key name is the parameter name of the galfit configuration line (ex: 'pos' for position, 'mag' for total magnitude, 'bOvera' for b/a ratio, etc.). The key value is the comment you want.</span>
<span class="sd">        </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>
<span class="sd">        </span>
<span class="sd">        .. warning::</span>
<span class="sd">            </span>
<span class="sd">            - for the POSITION, USE THE KEY 'pos' INSTEAD OF 'x' or 'y' as both values appear on the same line</span>
<span class="sd">            - you can also provide a comment for the 0th line (i.e. the model name). To do so, use the key name 'object'.</span>
<span class="sd">            - to add a comment to the line with index Z, use the key name 'Zline'</span>

<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    :param bool skipComponentInResidual: (**Optional**) whether to not take into account this component when computing the residual or not. If False, the residual will skip this component in the best-fit model.</span>
<span class="sd">    </span>
<span class="sd">    Return a complete sky function galfit configuration as formatted text.</span>
<span class="sd">    """</span>
    
    <span class="n">isFixed</span>  <span class="o">=</span> <span class="n">createIsFixedDict</span><span class="p">([</span><span class="s2">"background"</span><span class="p">,</span> <span class="s2">"xGradient"</span><span class="p">,</span> <span class="s2">"yGradient"</span><span class="p">],</span> <span class="n">fixedParams</span><span class="p">)</span>
    <span class="n">comments</span> <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">([</span><span class="s2">"object"</span><span class="p">,</span> <span class="s2">"background"</span><span class="p">,</span> <span class="s2">"xGradient"</span><span class="p">,</span> <span class="s2">"yGradient"</span><span class="p">,</span> <span class="s2">"skipComponentInResidual"</span><span class="p">],</span> <span class="n">comments</span><span class="p">)</span>
            
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="s2">"sky"</span><span class="p">,</span>
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">'Z'</span><span class="p">],</span>
                    <span class="p">[</span><span class="n">background</span><span class="p">,</span> <span class="n">xGradient</span><span class="p">,</span> <span class="n">yGradient</span><span class="p">,</span> <span class="n">skipComponentInResidual</span><span class="p">],</span>
                    <span class="p">[</span><span class="n">isFixed</span><span class="p">[</span><span class="s1">'background'</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s2">"xGradient"</span><span class="p">],</span> <span class="n">isFixed</span><span class="p">[</span><span class="s1">'yGradient'</span><span class="p">],</span> <span class="s2">""</span><span class="p">],</span>
                    <span class="p">[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'backgroundFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'GradientFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'GradientFormat'</span><span class="p">],</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">"</span><span class="p">],</span>
                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comments</span><span class="p">[</span><span class="s1">'object'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"background"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s2">"xGradient"</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'yGradient'</span><span class="p">],</span> <span class="n">comments</span><span class="p">[</span><span class="s1">'skipComponentInResidual'</span><span class="p">]],</span> 
                    <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span>
                    <span class="n">mainComment</span><span class="o">=</span><span class="s1">'sky'</span><span class="p">)</span></div>
    

<span class="c1">######################################################################</span>
<span class="c1">#                   Additional galfit tag functions                  #</span>
<span class="c1">######################################################################</span>
    
<div class="viewcode-block" id="bendingModes"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.bendingModes">[docs]</a><span class="k">def</span> <span class="nf">bendingModes</span><span class="p">(</span><span class="n">listModes</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">listModesValues</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">],</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct bending modes GALFIT configuration.</span>

<span class="sd">    :param list[int] listModes: (**Optional**) mode number</span>
<span class="sd">    :param list[float] listModesValues: (**Optional**) value of the corresponding mode</span>
<span class="sd">            </span>
<span class="sd">    :param dict comments: (**Optional**) dictionary which contains a comment for each line. </span>
<span class="sd">    </span>
<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            By default, **comments** is set to None, and default comments will be used instead.</span>
<span class="sd">            </span>
<span class="sd">            The dictionnary key names are the mode number. For instance</span>
<span class="sd">            </span>
<span class="sd">            * 1 for bending mode 1</span>
<span class="sd">            * 2 for bending mode 2, and so on...</span>
<span class="sd">            </span>
<span class="sd">            The key value is the comment you want.</span>
<span class="sd">            </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>

<span class="sd">    :param bool noComments: (**Optional**) whether to not provide any comments or not</span>
<span class="sd">    :param list fixedParams: (**Optional**) list of parameter names which must be fixed during galfit fitting routine. See :py:func:`genModel` for more information.</span>
<span class="sd">    </span>
<span class="sd">    :returns: bending modes GALFIT configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="n">isFixed</span>        <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">fixedParams</span> <span class="k">else</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">listModes</span><span class="p">]</span>
    
    <span class="k">if</span> <span class="n">comments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">comments</span>   <span class="o">=</span> <span class="p">[</span><span class="s2">"Bending mode </span><span class="si">%d</span><span class="s2">"</span> <span class="o">%</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">listModes</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">comment</span>    <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">(</span><span class="n">listModes</span><span class="p">,</span> <span class="n">comments</span><span class="p">)</span>
        <span class="n">comments</span>   <span class="o">=</span> <span class="p">[</span><span class="n">comment</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">listModes</span><span class="p">]</span>
    
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">listModes</span><span class="p">,</span> <span class="n">listModesValues</span><span class="p">,</span> <span class="n">isFixed</span><span class="p">,</span> <span class="p">[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'bendingFormat'</span><span class="p">]]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">listModes</span><span class="p">),</span> 
                    <span class="n">comments</span><span class="o">=</span><span class="n">comments</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span> <span class="n">removeLine0</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">"B"</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="boxy_diskyness"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.boxy_diskyness">[docs]</a><span class="k">def</span> <span class="nf">boxy_diskyness</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">isFixed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct a boxy/diskyness (genralised ellipses) GALFIT configuration.</span>
<span class="sd">    </span>
<span class="sd">    :parma bool isFixed: (**Optional**) whether to fix the parameter during galfit fitting routine</span>
<span class="sd">    :param float value: value of the diskyness/boxyness parameter (negative = more disky, positive = more boxy)</span>
<span class="sd">    :param str comment: comment to append at the end of the line</span>
<span class="sd">            </span>
<span class="sd">    :returns: boxyness/diskyness GALFIT configuration</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="k">if</span> <span class="n">comment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="s2">"traditional diskyness(-)/boxyness(+)"</span>
        
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="n">value</span><span class="p">],</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="ow">not</span> <span class="n">isFixed</span><span class="p">)],</span> <span class="p">[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'boxy_diskyFormat'</span><span class="p">]],</span> <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="n">comment</span><span class="p">],</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">removeLine0</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">"c"</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="fourierModes"><a class="viewcode-back" href="../../galfit/models.html#galfit.models.fourierModes">[docs]</a><span class="k">def</span> <span class="nf">fourierModes</span><span class="p">(</span><span class="n">listModes</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">listModesAmplitudes</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">],</span> <span class="n">listModesPhases</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">fixedParams</span><span class="o">=</span><span class="p">[],</span> <span class="n">comments</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">    </span>
<span class="sd">    Construct Azimuthal fourier modes GALFIT configuration.</span>

<span class="sd">    :param list[int] listModes: mode number</span>
<span class="sd">    :param list[float] listModesAmplitudes: amplitudes of the corresponding mode</span>
<span class="sd">    :param list[float] listModesPhases: phases of the corresponding mode</span>
<span class="sd">            </span>
<span class="sd">    :param dict comments: dictionary which contains a comment for each line. By default, comments is set to None, and default comments will be used instead.</span>
<span class="sd">    </span>
<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            The dictionnary key names are the modes number followed by A for amplitude and P for phase. For instance </span>
<span class="sd">            </span>
<span class="sd">            * '1A' for the amplitude of the fourier mode 1</span>
<span class="sd">            * '2P' for the phase of Fourier mode 2, and so on...</span>
<span class="sd">            </span>
<span class="sd">            The key value is the comment you want.</span>
<span class="sd">            </span>
<span class="sd">            You only need to provide comments for the parameters you want. Unprovided key names will result in no comment given to the line.</span>

<span class="sd">    :param list[str] fixedParams: list of Fourier modes amplitudes and/or phases which must be fixed in GALFIT. </span>
<span class="sd">    </span>
<span class="sd">        .. rubric:: **Example**</span>
<span class="sd">        </span>
<span class="sd">        Say one wants to fix the amplitude of the Fourier mode 1 and the phase of Fourier mode 2, then one may write </span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; fixedParams=['1A', '2P']</span>

<span class="sd">    :param bool noComments: whether to provide no comments or not</span>
<span class="sd">    </span>
<span class="sd">    :returns: Azimuthal fourier modes GALFIT configuration as formatted text</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    """</span>
    
    <span class="n">listModesValues</span>       <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">amp</span><span class="p">,</span> <span class="n">ph</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">listModesAmplitudes</span><span class="p">,</span> <span class="n">listModesPhases</span><span class="p">):</span>
        <span class="n">listModesValues</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">amp</span><span class="p">,</span> <span class="n">ph</span><span class="p">])</span>
    
    <span class="c1"># we use the behaviour that True is 1 and False is 0 in python</span>
    <span class="n">isFixed</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">int</span><span class="p">((</span><span class="s1">'</span><span class="si">%d</span><span class="s1">A'</span> <span class="o">%</span><span class="n">i</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fixedParams</span><span class="p">),</span> <span class="nb">int</span><span class="p">((</span><span class="s1">'</span><span class="si">%d</span><span class="s1">P'</span> <span class="o">%</span><span class="n">i</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fixedParams</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">listModes</span><span class="p">]</span>
    
    <span class="k">if</span> <span class="n">comments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">comments</span>          <span class="o">=</span> <span class="p">[</span><span class="s2">"Az. Fourier mode </span><span class="si">%d</span><span class="s2">, amplitude and phase angle"</span> <span class="o">%</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">listModes</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">possibleModesKeys</span> <span class="o">=</span> <span class="n">ravel</span><span class="p">([[</span><span class="s2">"</span><span class="si">%d</span><span class="s2">A"</span> <span class="o">%</span><span class="n">i</span><span class="p">,</span> <span class="s2">"</span><span class="si">%d</span><span class="s2">P"</span> <span class="o">%</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">listModes</span><span class="p">])</span>
        <span class="n">comment</span>           <span class="o">=</span> <span class="n">createCommentsDict</span><span class="p">(</span><span class="n">possibleModesKeys</span><span class="p">,</span> <span class="n">comments</span><span class="p">)</span>
        <span class="n">comments</span>          <span class="o">=</span> <span class="p">[[</span><span class="n">comment</span><span class="p">[</span><span class="s2">"</span><span class="si">%d</span><span class="s2">A"</span> <span class="o">%</span><span class="n">i</span><span class="p">],</span> <span class="n">comment</span><span class="p">[</span><span class="s2">"</span><span class="si">%d</span><span class="s2">P"</span> <span class="o">%</span><span class="n">i</span><span class="p">]]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">listModes</span><span class="p">]</span>
    
    <span class="k">return</span> <span class="n">genModel</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">listModes</span><span class="p">,</span> <span class="n">listModesValues</span><span class="p">,</span> <span class="n">isFixed</span><span class="p">,</span> <span class="p">[[</span><span class="n">formats</span><span class="p">[</span><span class="s1">'ampFourierFormat'</span><span class="p">],</span> <span class="n">formats</span><span class="p">[</span><span class="s1">'phaseFourierFormat'</span><span class="p">]]]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">listModes</span><span class="p">),</span> 
                    <span class="n">comments</span><span class="o">=</span><span class="n">comments</span><span class="p">,</span> <span class="n">noComments</span><span class="o">=</span><span class="n">noComments</span><span class="p">,</span> <span class="n">removeLine0</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">"F"</span><span class="p">)</span></div>
</pre></div>
</div>
<div class="prev-next-bottom">
</div>
</div>
</div>
<footer class="footer mt-5 mt-md-0">
<div class="container">
<p>
        
          By Wilfried Mercier<br/>
        
            Â© Copyright 2021, Wilfried Mercier.<br/>
</p>
</div>
</footer>
</main>
</div>
</div>
<script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>
</body>
</html>