
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>galaxy.SED.misc — wilfried library 1.0 documentation</title>
<link href="../../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css" rel="stylesheet"/>
<link href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../../../_static/vendor/open-sans_all/1.44.1/index.css" rel="stylesheet"/>
<link href="../../../_static/vendor/lato_latin-ext/1.44.1/index.css" rel="stylesheet"/>
<link href="../../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../../_static/sphinx-book-theme.e7340bb3dbd8dde6db86f25597f54a1b.css" rel="stylesheet" type="text/css"/>
<link href="../../../_static/copybutton.css" rel="stylesheet" type="text/css"/>
<link as="script" href="../../../_static/js/index.d3f166471bb80abb5163.js" rel="preload"/>
<script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
<script src="../../../_static/jquery.js"></script>
<script src="../../../_static/underscore.js"></script>
<script src="../../../_static/doctools.js"></script>
<script src="../../../_static/clipboard.min.js"></script>
<script src="../../../_static/copybutton.js"></script>
<script src="../../../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
<link href="../../../genindex.html" rel="index" title="Index">
<link href="../../../search.html" rel="search" title="Search"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
</link></head>
<body data-offset="80" data-spy="scroll" data-target="#bd-toc-nav">
<div class="container-xl">
<div class="row">
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
<div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../index.html">
<h1 class="site-logo" id="site-title">wilfried library 1.0 documentation</h1>
</a>
</div><form action="../../../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="icon fas fa-search"></i>
<input aria-label="Search the docs ..." autocomplete="off" class="form-control" id="search-input" name="q" placeholder="Search the docs ..." type="search"/>
</form>
<nav aria-label="Main navigation" class="bd-links" id="bd-docs-nav">
<ul class="nav sidenav_l1">
<li class="toctree-l1">
<a class="reference internal" href="../../../index.html">
   Table of content
  </a>
</li>
</ul>
<ul class="nav sidenav_l1">
<li class="toctree-l1">
<a class="reference internal" href="../../../dependencies.html">
   Required dependencies
  </a>
</li>
<li class="toctree-l1">
<a class="reference internal" href="../../../makeLifeSimpler.html">
   makeLifeSimpler
  </a>
</li>
<li class="toctree-l1 collapsible-parent">
<a class="reference internal" href="../../../utilities/index.html">
   Useful utilities
  </a>
<ul class="collapse-ul">
<li class="toctree-l2">
<a class="reference internal" href="../../../utilities/coloredMessages.html">
     Colored messages
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../utilities/dict.html">
     Dictionaries
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../utilities/io.html">
     Input/Output
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../utilities/list.html">
     List manipulations
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../utilities/strings.html">
     Strings manipulation
    </a>
</li>
<li class="toctree-l2 collapsible-parent">
<a class="reference internal" href="../../../utilities/plotUtilities/index.html">
     Plot utilities
    </a>
<ul class="collapse-ul">
<li class="toctree-l3">
<a class="reference internal" href="../../../utilities/plotUtilities/asManyHists.html">
       Histograms
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../../utilities/plotUtilities/hst.html">
       Galfit related plots
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../../utilities/plotUtilities/misc.html">
       Miscellaneous
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../../utilities/plotUtilities/singleContour.html">
       Contours
      </a>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
<li class="toctree-l1 collapsible-parent">
<a class="reference internal" href="../../../galaxy/index.html">
   Galaxy module
  </a>
<ul class="collapse-ul">
<li class="toctree-l2">
<a class="reference internal" href="../../../galaxy/angularMomentum.html">
     Galaxies angular momentum
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../galaxy/cosmology.html">
     Cosmology computations
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../galaxy/kinematics.html">
     Galaxy kinematics
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../galaxy/misc.html">
     Miscellaneous
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../galaxy/massModels.html">
     Galaxy mass models
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../galaxy/models.html">
     Galaxy models
    </a>
</li>
<li class="toctree-l2 collapsible-parent">
<a class="reference internal" href="../../../galaxy/morphology/index.html">
     Galaxies morphology
    </a>
<ul class="collapse-ul">
<li class="toctree-l3">
<a class="reference internal" href="../../../galaxy/morphology/SersicFlux.html">
       Sersic fluxes
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../../galaxy/morphology/Morpho.html">
       Morphological parameters
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../../galaxy/morphology/Thickness.html">
       Galaxies thickness
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../../galaxy/morphology/MUSE.html">
       MUSE related functions
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../../galaxy/morphology/Other.html">
       Other Sersic related functions
      </a>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
<li class="toctree-l2 collapsible-parent">
<a class="reference internal" href="../../../galaxy/photometry/index.html">
     Galaxies photometry
    </a>
<ul class="collapse-ul">
<li class="toctree-l3">
<a class="reference internal" href="../../../galaxy/photometry/Fluxes.html">
       Fluxes, colour excess and attenuation
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../../galaxy/photometry/Masses_SFR.html">
       Masses and SFR estimates
      </a>
</li>
<li class="toctree-l3">
<a class="reference internal" href="../../../galaxy/photometry/Magnitudes.html">
       Magnitude conversions
      </a>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
<li class="toctree-l1 collapsible-parent">
<a class="reference internal" href="../../../galfit/index.html">
   Galfit module
  </a>
<ul class="collapse-ul">
<li class="toctree-l2">
<a class="reference internal" href="../../../galfit/galfit.html">
     Galfit auto-routines
    </a>
</li>
<li class="toctree-l2">
<a class="reference internal" href="../../../galfit/models.html">
     Galfit models
    </a>
</li>
</ul>
<i class="fas fa-chevron-down">
</i>
</li>
</ul>
</nav>
<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>
</div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
<div class="topbar container-xl fixed-top">
<div class="topbar-contents row">
<div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
<div class="col pl-md-4 topbar-main">
<button aria-controls="site-navigation" aria-expanded="true" aria-label="Toggle navigation" class="navbar-toggler ml-0" data-placement="left" data-target=".site-navigation" data-toggle="tooltip" id="navbar-toggler" title="Toggle navigation" type="button">
<i class="fas fa-bars"></i>
<i class="fas fa-arrow-left"></i>
<i class="fas fa-arrow-up"></i>
</button>
<div class="dropdown-buttons-trigger">
<button aria-label="Connect with source repository" class="btn btn-secondary topbarbtn" id="dropdown-buttons-trigger"><i class="fab fa-github"></i></button>
<div class="dropdown-buttons sourcebuttons">
<a class="repository-button" href="https://github.com/WilfriedMercier/wilfried"><button class="btn btn-secondary topbarbtn" data-placement="left" data-toggle="tooltip" title="Source repository" type="button"><i class="fab fa-github"></i>repository</button></a>
</div>
</div>
<a class="full-screen-button"><button aria-label="Fullscreen mode" class="btn btn-secondary topbarbtn" data-placement="bottom" data-toggle="tooltip" onclick="toggleFullScreen()" title="Fullscreen mode" type="button"><i class="fas fa-expand"></i></button></a>
</div>
<div class="d-none d-md-block col-md-2 bd-toc show">
</div>
</div>
</div>
<div class="row" id="main-content">
<div class="col-12 col-md-9 pl-md-3 pr-md-0">
<div>
<h1>Source code for galaxy.SED.misc</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">"""</span>
<span class="sd">Created on Fri Sep 17 17:12:07 2021</span>

<span class="sd">@author: wilfried</span>
<span class="sd">"""</span>

<span class="kn">import</span> <span class="nn">os.path</span> <span class="k">as</span> <span class="nn">opath</span>
      
<div class="viewcode-block" id="ShapeError"><a class="viewcode-back" href="../../../galaxy/SED/misc.html#galaxy.SED.misc.ShapeError">[docs]</a><span class="k">class</span> <span class="nc">ShapeError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">'''Error which is caught when two arrays do not share the same shape.'''</span>
    
<div class="viewcode-block" id="ShapeError.__init__"><a class="viewcode-back" href="../../../galaxy/SED/misc.html#galaxy.SED.misc.ShapeError.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">'''</span>
<span class="sd">        .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">        </span>
<span class="sd">        Init method for this exception.</span>
<span class="sd">        </span>
<span class="sd">        :param ndarray arr1: first array</span>
<span class="sd">        :param ndarray arr2: second array</span>
<span class="sd">        </span>
<span class="sd">        :param str msg: (**Optional**) message to append at the end</span>
<span class="sd">        '''</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">''</span>
        
        <span class="nb">super</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Array 1 has shape </span><span class="si">{</span><span class="n">arr1</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s1"> but array 2 has shape </span><span class="si">{</span><span class="n">arr2</span><span class="o">.</span><span class="n">shape</span><span class="si">}{</span><span class="n">msg</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span></div></div>
        
<div class="viewcode-block" id="Property"><a class="viewcode-back" href="../../../galaxy/SED/misc.html#galaxy.SED.misc.Property">[docs]</a><span class="k">class</span> <span class="nc">Property</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">'''Define a property object used by SED objects to store SED parameters.'''</span>
    
<div class="viewcode-block" id="Property.__init__"><a class="viewcode-back" href="../../../galaxy/SED/misc.html#galaxy.SED.misc.Property.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">,</span> <span class="n">types</span><span class="p">,</span> <span class="n">subtypes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minBound</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxBound</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">testFunc</span><span class="o">=</span><span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="n">testMsg</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">'''</span>
<span class="sd">        .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">        </span>
<span class="sd">        Init the property object.</span>

<span class="sd">        :param type: type of the property. If the property is a list, provide the elements type in **subtypes**.</span>
<span class="sd">        :param default: default value used at init</span>

<span class="sd">        :param subtypes: (**Optional**) type of the elements if **type** is a list. If None, it is ignored.</span>
<span class="sd">        :param minBound: (**Optional**) minimum value for the property. If None, it is ignored.</span>
<span class="sd">        :param maxBound: (**Optional**) maximum value for the property. If None, it is ignored.</span>
<span class="sd">        :param testFunc: (**Optional**) a test function with the value to test as argument which must not be passed in order to set a value. This can be used to add additional checks which are not taken into account by default.</span>
<span class="sd">        :param testMsg: (**Optional**) a test message used to throw an error if testFunc returns False</span>
<span class="sd">        </span>
<span class="sd">        :raises TypeError: if **testFunc** is not callable or **testMsg** is not of type str</span>
<span class="sd">        '''</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">testFunc</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">testMsg</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'test function and test message must be a callable object and of type str respectively.'</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">types</span>     <span class="o">=</span> <span class="n">types</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">subtypes</span>  <span class="o">=</span> <span class="n">subtypes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min</span>       <span class="o">=</span> <span class="n">minBound</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max</span>       <span class="o">=</span> <span class="n">maxBound</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_testFunc</span> <span class="o">=</span> <span class="n">testFunc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_testMsg</span>  <span class="o">=</span> <span class="n">testMsg</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default</span>   <span class="o">=</span> <span class="n">default</span></div>
        
    <span class="c1">##################################</span>
    <span class="c1">#        Built-in methods        #</span>
    <span class="c1">##################################</span>
    
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">'''</span>
<span class="sd">        .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">        </span>
<span class="sd">        Implement a string representation of the class.</span>
<span class="sd">        '''</span>
        
        <span class="n">typ</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1">'</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="si">:</span><span class="s1">.3e</span><span class="si">}</span><span class="s1">'</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            
            <span class="n">joinL</span>  <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">'</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">i</span><span class="si">:</span><span class="s1">.3e</span><span class="si">}</span><span class="s1">'</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="k">else</span> <span class="n">i</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
            
            <span class="k">if</span> <span class="kc">None</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">joinL</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">joinL</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'no string representation available for Property object with value of type </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">subtypes</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
             <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'no string representation available for Property object with value of type </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span>
        
    <span class="c1">###############################</span>
    <span class="c1">#        Miscellaneous        #</span>
    <span class="c1">###############################</span>
    
<div class="viewcode-block" id="Property.set"><a class="viewcode-back" href="../../../galaxy/SED/misc.html#galaxy.SED.misc.Property.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">'''</span>
<span class="sd">        .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">        </span>
<span class="sd">        Set the current value.</span>

<span class="sd">        :param value: new value. Must be of correct type, and within bounds.</span>

<span class="sd">        :raises TypeError: </span>
<span class="sd">            </span>
<span class="sd">            * if **value** does not have correct type</span>
<span class="sd">            * if **value** is a list and at least one value in the list is not of correct subtype</span>
<span class="sd">        </span>
<span class="sd">        :raises ValueError: </span>
<span class="sd">            </span>
<span class="sd">            * if one of the values in **value** is below the minimum bound</span>
<span class="sd">            * if one of the values in **value** is above the maximum bound</span>
<span class="sd">        '''</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'cannot set property with value </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1"> of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s1">. Acceptable types are </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span>
            
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            
            <span class="k">if</span> <span class="nb">any</span> <span class="p">((</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subtypes</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'at least one value does not have the type </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">subtypes</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span>
        
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">((</span><span class="n">elem</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'one of the values is less than the minimum acceptable bound </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">((</span><span class="n">elem</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'one of the values is more than the maximum acceptable bound </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">min</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'value is </span><span class="si">{value}</span><span class="s1"> but minimum acceptable bound is </span><span class="si">{self.min}</span><span class="s1">.'</span><span class="p">)</span>
        
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'value is </span><span class="si">{value}</span><span class="s1"> but maximum acceptable bound is </span><span class="si">{self.max}</span><span class="s1">.'</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_testFunc</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_testMsg</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span></div></div>

<div class="viewcode-block" id="PathlikeProperty"><a class="viewcode-back" href="../../../galaxy/SED/misc.html#galaxy.SED.misc.PathlikeProperty">[docs]</a><span class="k">class</span> <span class="nc">PathlikeProperty</span><span class="p">(</span><span class="n">Property</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">'''Define a property object where the data stored must be a valid path or file.'''</span>
    
<div class="viewcode-block" id="PathlikeProperty.__init__"><a class="viewcode-back" href="../../../galaxy/SED/misc.html#galaxy.SED.misc.PathlikeProperty.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">'''</span>
<span class="sd">        .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">        </span>
<span class="sd">        Init the path-like object. Path-like type must either be str or list of str.</span>
<span class="sd">        </span>
<span class="sd">        :param default: default value used at init</span>
<span class="sd">        </span>
<span class="sd">        :param str path: (**Optional**) path to append each time to the new value</span>
<span class="sd">        :param str ext: (**Optionall**) extension to append at the end of the file name when checking the path</span>
<span class="sd">        :param **kwargs: (**Optional**) additional parameters passed to the Property constructor</span>
<span class="sd">        </span>
<span class="sd">        :raises TypeError: if **path** and **ext** are not of type str</span>
<span class="sd">        </span>
<span class="sd">        .. seealso:: :py:class:`Property`</span>
<span class="sd">        '''</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'path has type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="si">}</span><span class="s1"> but it must have type str.'</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'extension has type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span><span class="si">}</span><span class="s1"> but it must have type str.'</span><span class="p">)</span>
        
        <span class="c1"># Extension to append when checking path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ext</span>     <span class="o">=</span> <span class="n">ext</span>
        
        <span class="c1"># Set path to append at the beginning of a check</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span>    <span class="o">=</span> <span class="n">path</span>
        
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="n">subtypes</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">minBound</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxBound</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
        <span class="c1"># Need to call set again since it was called in super</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default</span> <span class="o">=</span> <span class="n">default</span></div>
        
        
<div class="viewcode-block" id="PathlikeProperty.set"><a class="viewcode-back" href="../../../galaxy/SED/misc.html#galaxy.SED.misc.PathlikeProperty.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">'''</span>
<span class="sd">        .. codeauthor:: Wilfried Mercier - IRAP &lt;wilfried.mercier@irap.omp.eu&gt;</span>
<span class="sd">        </span>
<span class="sd">        Set the current value.</span>
<span class="sd">        </span>
<span class="sd">        .. note::</span>
<span class="sd">            </span>
<span class="sd">            If **value** is 'NONE', the path check is not performed.</span>

<span class="sd">        :param value: new value. Must be of correct type, and within bounds.</span>

<span class="sd">        :raises TypeError: </span>
<span class="sd">            </span>
<span class="sd">            * if **value** does not have correct type (str or list)</span>
<span class="sd">            * if **value** is a list and at least one value in the list is not of correct subtype (str)</span>
<span class="sd">        </span>
<span class="sd">        :raises OSError: if expanded path (**value**) is neither a valid path, nor a valid file name</span>
<span class="sd">        '''</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'cannot set property with value </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1"> of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s1">. Acceptable types are </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            
            <span class="k">if</span> <span class="nb">any</span><span class="p">((</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subtypes</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'at least one value does not have the type </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">subtypes</span><span class="si">}</span><span class="s1">.'</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>    
                <span class="n">path</span>  <span class="o">=</span> <span class="n">opath</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ext</span>
                <span class="n">epath</span> <span class="o">=</span> <span class="n">opath</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">'NONE'</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">opath</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">epath</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">opath</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">epath</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'path </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s1"> (expanded as </span><span class="si">{</span><span class="n">epath</span><span class="si">}</span><span class="s1">) does not exist.'</span><span class="p">)</span>
            
        <span class="k">else</span><span class="p">:</span>
                
            <span class="n">path</span>     <span class="o">=</span> <span class="n">opath</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ext</span>
            <span class="n">epath</span>    <span class="o">=</span> <span class="n">opath</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">'NONE'</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">opath</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">epath</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">opath</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">epath</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'path </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s1"> (expanded as </span><span class="si">{</span><span class="n">epath</span><span class="si">}</span><span class="s1">) does not exist.'</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_testFunc</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_testMsg</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span>   <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span></div></div>
        
</pre></div>
</div>
<div class="prev-next-bottom">
</div>
</div>
</div>
<footer class="footer mt-5 mt-md-0">
<div class="container">
<p>
        
          By Wilfried Mercier<br/>
        
            © Copyright 2021, Wilfried Mercier.<br/>
</p>
</div>
</footer>
</main>
</div>
</div>
<script src="../../../_static/js/index.d3f166471bb80abb5163.js"></script>
</body>
</html>